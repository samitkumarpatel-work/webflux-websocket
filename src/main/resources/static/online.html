<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Online</title>
    <style>
        body {
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }
    </style>
</head>
<body>
    <div id="message-box"></div>
    <br/>
    <input type="text" id="message">
    <button onclick="sendMessage()">Send</button>
    <script>

        var clientWebSocket = new WebSocket("ws://localhost:8080/websocket-status");

        clientWebSocket.onopen = function() {
            clientWebSocket.send("Welcome to the chat!");
            events("Establish connection");
        }

        clientWebSocket.onclose = function(error) {
            events("Closing connection");
        }

        clientWebSocket.onerror = function(error) {
            events("An error occured");
        }

        clientWebSocket.onmessage = function(d) {
            console.log("clientWebSocket.onmessage", clientWebSocket, d);
            events(d.data);
        }

        function events(responseEvent) {
            document.querySelector("#message-box").innerHTML += responseEvent + "<br/>";
        }

        function sendMessage(){
            var message = document.getElementById("message").value;
            clientWebSocket.send(message);
        }

    </script>
</body>
</html>